{"version":3,"sources":["app.js"],"names":["paso","pasoInicial","pasoFinal","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarSeccion","tabs","botonesPaginador","paginaAnterior","paginaSiguiente","consultarAPI","nombreCliente","seleccionarFecha","seleccionarHora","mostrarResumen","seccionAnterior","document","querySelector","classList","remove","pasoSeleccionado","add","tabAnterior","querySelectorAll","forEach","boton","addEventListener","e","parseInt","target","dataset","async","url","resultado","fetch","mostrarServicios","json","error","console","log","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","appendChild","onclick","seleccionarServicio","divServicio","some","agregado","filter","value","inputFecha","dia","Date","getUTCDay","includes","mostrarAlerta","split","mensaje","tipo","elemento","desaparece","alertaPrevia","alerta","setTimeout","resumen","firstChild","removeChild","Object","values","length","headingServicios","contenedorServicio","textoServicio","innerHTML","headingCita","fechaObj","getDate","mes","getMonth","year","getFullYear","fechaFormateada","UTC","toLocaleDateString","weekday","month","day","fechaCita","horaCita","botonReservar","reservarCita"],"mappings":"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","file":"app.js","sourcesContent":["let paso = 1;\r\nconst pasoInicial = 1;\r\nconst pasoFinal = 3;\r\n\r\nconst cita = {\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp(){\r\n    mostrarSeccion();\r\n    tabs();\r\n    botonesPaginador();\r\n    paginaAnterior();\r\n    paginaSiguiente();\r\n    consultarAPI();\r\n    nombreCliente();\r\n    seleccionarFecha();\r\n    seleccionarHora();\r\n    mostrarResumen();\r\n}\r\n\r\nfunction mostrarSeccion(){\r\n\r\n    const seccionAnterior = document.querySelector('.mostrar');\r\n\r\n    if(seccionAnterior){\r\n        seccionAnterior.classList.remove('mostrar');\r\n    }\r\n    \r\n    const pasoSeleccionado = `#paso-${paso}`;\r\n    const seccion = document.querySelector(pasoSeleccionado);\r\n\r\n    seccion.classList.add('mostrar');\r\n\r\n    const tabAnterior = document.querySelector('.actual');\r\n\r\n    if(tabAnterior){\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n\r\n    const tabs = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n    tabs.classList.add('actual');\r\n}\r\n\r\nfunction tabs(){\r\n\r\n    const botones = document.querySelectorAll('.tabs button');\r\n    \r\n    botones.forEach( boton => {\r\n\r\n        boton.addEventListener('click', (e) => {\r\n            paso = parseInt(e.target.dataset.paso);\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        });\r\n    });\r\n}\r\n\r\nfunction botonesPaginador(){\r\n\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    if(paso === 1){\r\n        paginaAnterior.classList.add('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }else if(paso === 3){\r\n        paginaSiguiente.classList.add('ocultar');\r\n        paginaAnterior.classList.remove('ocultar');\r\n        mostrarResumen();\r\n    }else {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction paginaAnterior(){\r\n    \r\n    const paginaAnterior = document.querySelector('#anterior');\r\n\r\n    paginaAnterior.addEventListener('click', () => {\r\n\r\n        if(paso <= pasoInicial) return;\r\n\r\n        paso--;\r\n\r\n        botonesPaginador();\r\n    });\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    paginaSiguiente.addEventListener('click', () => {\r\n\r\n        if(paso >= pasoFinal) return;\r\n\r\n        paso++;\r\n\r\n        botonesPaginador();\r\n    });\r\n}\r\n\r\nasync function consultarAPI(){\r\n\r\n    try {\r\n        const url = 'http://localhost:3000/api/servicios';\r\n\r\n        const resultado = await fetch(url);\r\n        const servicios = await resultado.json();\r\n        mostrarServicios(servicios);\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction mostrarServicios(servicios){\r\n    \r\n    servicios.forEach( servicio => {\r\n        \r\n        const { id, nombre, precio } = servicio;\r\n\r\n        const nombreServicio = document.createElement('p');\r\n        nombreServicio.classList.add('nombre-servicio');\r\n        nombreServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('p');\r\n        precioServicio.classList.add('precio-servicio');\r\n        precioServicio.textContent = `$${precio}`;\r\n\r\n        const servicioDiv = document.createElement('div');\r\n        servicioDiv.classList.add('servicio');\r\n        servicioDiv.dataset.idServicio = id;\r\n        servicioDiv.appendChild(nombreServicio);\r\n        servicioDiv.appendChild(precioServicio);\r\n\r\n        servicioDiv.onclick = () => {\r\n            seleccionarServicio(servicio);\r\n        }\r\n\r\n        document.querySelector('#servicios').appendChild(servicioDiv);\r\n    });\r\n}\r\n\r\nfunction seleccionarServicio(servicio){\r\n\r\n    const { servicios } = cita;\r\n\r\n    const { id } = servicio;\r\n\r\n    cita.servicios = [...servicios, servicio];\r\n\r\n    const divServicio = document.querySelector(`[data-id-servicio=\"${id}\"]`);\r\n\r\n    if(servicios.some( agregado => agregado.id === id )){\r\n\r\n        divServicio.classList.remove('seleccionado');\r\n        cita.servicios = servicios.filter( agregado => agregado.id !== id );\r\n\r\n    }else {\r\n        divServicio.classList.add('seleccionado');\r\n    }\r\n}\r\n\r\nfunction nombreCliente(){\r\n    cita.nombre = document.querySelector('#nombre').value;\r\n}\r\n\r\nfunction seleccionarFecha(){\r\n\r\n    const inputFecha = document.querySelector('#fecha');\r\n\r\n    inputFecha.addEventListener('input', e => {\r\n\r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if( [0, 6].includes(dia) ){\r\n            inputFecha.value = '';\r\n            mostrarAlerta('Fines de semana no permitidos', 'error', '.formulario');\r\n        }else {\r\n            cita.fecha = e.target.value;            \r\n        }\r\n    });\r\n}\r\n\r\nfunction seleccionarHora(){\r\n\r\n    const inputHora = document.querySelector('#hora');\r\n    inputHora.addEventListener('input', e => {\r\n        \r\n        const horaCita = e.target.value;\r\n        const hora = horaCita.split(':')[0];\r\n\r\n        if(hora < 10 || hora > 16){\r\n            e.target.value = '';\r\n            mostrarAlerta('Hora no válida', 'error', '.formulario');\r\n        }else {\r\n            cita.hora = e.target.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo, elemento, desaparece = true){\r\n\r\n    const alertaPrevia = document.querySelector('.alerta');\r\n\r\n    if(alertaPrevia) {\r\n        alertaPrevia.remove();\r\n    };\r\n\r\n    const alerta = document.createElement('div');\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add('alerta', tipo);\r\n\r\n    const referencia = document.querySelector(elemento);\r\n\r\n    referencia.appendChild(alerta);\r\n\r\n    if(desaparece){\r\n        setTimeout(() => {\r\n            alerta.remove();\r\n        }, 4000);\r\n    }\r\n}\r\n\r\nfunction mostrarResumen(){\r\n\r\n    const resumen = document.querySelector('.contenido-resumen');\r\n\r\n    while(resumen.firstChild){\r\n        resumen.removeChild(resumen.firstChild);\r\n    }\r\n\r\n    if(Object.values(cita).includes('') || cita.servicios.length === 0){\r\n        mostrarAlerta('Faltan datos de servicios, fecha u hora', 'error', '.contenido-resumen', false);\r\n        return;\r\n    }\r\n\r\n    const { nombre, fecha, hora, servicios } = cita;\r\n\r\n    const headingServicios = document.createElement('h3');\r\n    headingServicios.textContent = 'Resumen de Servicios';\r\n    resumen.appendChild(headingServicios);\r\n\r\n\r\n    servicios.forEach( servicio => {\r\n\r\n        const { id, precio, nombre } = servicio;\r\n        \r\n        const contenedorServicio = document.createElement('div');\r\n        contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n        const textoServicio = document.createElement('p');\r\n        textoServicio.textContent = nombre;\r\n\r\n        const precioServicio = document.createElement('p');\r\n        precioServicio.innerHTML = `<span>Precio:</span> $${precio}`;\r\n\r\n        contenedorServicio.appendChild(textoServicio);\r\n        contenedorServicio.appendChild(precioServicio);\r\n\r\n        resumen.appendChild(contenedorServicio);\r\n    });\r\n\r\n    const headingCita = document.createElement('h3');\r\n    headingCita.textContent = 'Datos Cita';\r\n    resumen.appendChild(headingCita);\r\n\r\n    const nombreCliente = document.createElement('p');\r\n    nombreCliente.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n    const fechaObj = new Date(fecha);\r\n    const dia = fechaObj.getDate() + 2;\r\n    const mes = fechaObj.getMonth();\r\n    const year = fechaObj.getFullYear();\r\n\r\n    const fechaUTC = new Date( Date.UTC(year, mes, dia) );\r\n\r\n    const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }\r\n\r\n    const fechaFormateada = fechaUTC.toLocaleDateString('es-MX', opciones);\r\n\r\n    const fechaCita = document.createElement('p');\r\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fechaFormateada}`;\r\n\r\n    const horaCita = document.createElement('p');\r\n    horaCita.innerHTML = `<span>Hora:</span> ${hora} Horas`;\r\n\r\n    const botonReservar = document.createElement('button');\r\n    botonReservar.classList.add('boton');\r\n    botonReservar.textContent = 'Reservar Cita';\r\n    botonReservar.onclick = reservarCita;\r\n\r\n    resumen.appendChild(nombreCliente);\r\n    resumen.appendChild(fechaCita);\r\n    resumen.appendChild(horaCita);\r\n    resumen.appendChild(botonReservar)\r\n}\r\n\r\nfunction reservarCita() {\r\n    console.log('Reservando cita');\r\n}"]}